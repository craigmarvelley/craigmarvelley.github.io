<p>I recently <a href="http://marvelley.com/blog/2014/03/18/vagrant-1-dot-5-syncing-situation/">mentioned</a>
I&rsquo;m going all-in on provisioning and running all my development
environments in VMs provisioned with Ansible. My Ansible use doesn&rsquo;t end there though &ndash;
I&rsquo;m also using it to provision my MacBook.</p>

<p>I&rsquo;d read of a few other people doing this &ndash; Benjamin Eberlei has a particularly
<a href="http://whitewashing.de/2013/11/19/setting_up_development_machines_ansible_edition.html">good post</a>
on the topic, and was pretty much the inspiration for me doing the
same. Setting up a new machine can be a bit of a bore, and while in theory it
only happens whenever I upgrade hardware I have been caught out in the past with kernel
corruption forcing a reinstall, and I&rsquo;d like
to minimise the hassle should it ever happen again. I have <a href="http://backblaze.com">backups</a>
, but one of the few upsides of going back to scratch with a machine is that it&rsquo;s an
opportunity for spring clean; a script that effectively lists all the essential
components of my computer, and configures them to my taste, makes that so much easier.</p>

<p>Anyway. A couple of people mentioned they&rsquo;d be interested in the playbooks I wrote
to provision my laptop, so I&rsquo;ve taken out anything personal to me and <a href="https://github.com/craigmarvelley/macbook-provisioning">mirrored them
on Github</a>.</p>

<p>Currently the provisioning involves four things:</p>

<ul>
<li>Install Homebrew and various brews</li>
<li>Install Homebrew Casks and various casks</li>
<li>Enable zsh as default shell and install oh-my-zsh</li>
<li>Install dotfiles to configure git, vim, etc. (my dotfiles repo is <a href="https://github.com/craigmarvelley/dotfiles">here</a>)</li>
</ul>


<p>It&rsquo;s all straightforward, but a couple of implementation details:</p>

<ul>
<li>I&rsquo;ve ended up using Alfred as my OS X search tool because I store my casks under <code>/usr/local</code>
with the other brew stuff and symlink to /Applications, and Spotlight doesn&rsquo;t
grok symlinks. Instead I configure Alfred to link in the cask files</li>
<li>I read on a few places on the web that the method I use to determine my current shell
process &ndash; <code>echo $SHELL</code> &ndash; isn&rsquo;t foolproof. Works for me, but YMMV</li>
</ul>


<p>There&rsquo;s more I could do in terms of what I manage, especially when it comes to
dotfile configuration (incidentally one of the best things about automating
provisioning in this way is you end up looking at other people&rsquo;s approaches,
and finding out about libraries and tools that you never even knew existed &ndash; <a href="http://robots.thoughtbot.com/rcm-for-rc-files-in-dotfiles-repos">Thoughtbot&rsquo;s rcm</a>
is one such example here).
Also I&rsquo;m still finding my way with Ansible, so my playbooks can undoubtedly be improved, especially
when it comes to idempotency.
Nevertheless I&rsquo;m really happy to have a record of my machine&rsquo;s starting state, and will enjoy adding to it as time
passes.</p>
